### 아주대학교 모바일 프로그래밍 최종 프로젝트

##### Kinder Book 프로젝트

##### 프로젝트 주제 선정 배경
###### 주제 선정 이유
- 현직 유치원 교사의 인터뷰를 통해 유치원 교사가 퇴근 시간 이후 학부모의 연락, 급식 알레르기에 대한 정보를 하나하나 완벽히 인지하고 있어야한다는 것에 스트레스를 받는다는 것을 알게 되었다.
- 국가에서 유치원생을 대상으로 관리해주는 서비스가 존재하지 않다. (초등학교 안내 서비스 e알리미와 같은 서비스가 존재하나 e알리미는 학교 혹은 교육청에서 가정과 학교로 일방향 공지만 가능하다.
- 학부모들이 현재 자신의 자녀가 유치원에서 어떤 활동을 하고 무엇을 먹고 있는지 궁금해하는 경우가 많다.
##### 어플리케이션 구현
###### 데이터베이스
<img src='/mobile_db.png'></img>

##### Android
###### Server Packages
모델 객체와 RetrofitClient, RetrofitInterface가 포함된다. 모델 객체는 필드, 생성자, getter & setter, toString으로 구성되어있다. Gson 라이브러리의 SerializedName 어노테이션은 모델 객체의 필드를 Json 형식으로 직렬화 / 역직렬화 할 때 사용되고 Expose 어노테이션은 객체가 null 값일 경우 Json으로 만들 필드를 자동 생략해준다.
-  Model
  1. Board
     postName에는 알림장 포스트의 제목, postBody에는 알림장 포스트의 내용이 저장된다.
  2. ClassName
     className에 반 이름이 저장된다.
  3. ClassroomList
     classId에는 반 번호, className에는 반 이름, tName에는 담임 교사 이름이 저장된다.
  4. Kids
     kidsName에는 원생 이름, classId에는 원생이 속해있는 반 번호가 저장된다.
-  RetrofitClient
Retrofit 객체를 static으로 생성하여 하나의 객체로 운영하기 위하여 싱글톤 패턴을 적용하였다. 생성자에서 String 타입의 URL과 Json을 다룰 수 있는 컨버터를 주입해준다. 이 객체는 getInstance 메소드를 통해 호출할 수 있다. Retrofit 인터페이스를 호출할 수 있는 getRetrofitInterface 메소드가 있다. 호출한 인터페이스에서 필요한 메서드를 선택하고 매개변수를 삽입한 뒤에 콜백 함수 형태로 데이터를 주고받는다. 데이터를 조회한다면 데이터베이스로부터 Response.body에 객체가 실려 온다. 통신이 성공했을 때는 onResponse 메서드 안에서 성공하였다는 Log를 띄우고 데이터를 받아온다. 실패했을 경우에는 onFailure 메서드에서 에러 Log를 띄우고 어떤 오류가 발생하였는지 Throwable t를 메세지로 받아 확인할 수 있다.
-  RetrofitInterface
백엔드로 구현한 REST API를 이용할 수 있게 URL과 매핑하는 인터페이스다. 실제 클라이언트에서 필요한 메소드를 호출하여 사용하는 방식이다. 데이터베이스에서 조회할 수 있는 GET 방식, 삽입할 수 있는 PUT 방식, 삭제할 수 있는 DELETE 방식을 어노테이션을 사용하여 명시하고, 어노테이션 옆에 URL을 입력한다. 매개변수로 데이터를 주고받을 수 있는 방법은 여러가지가 있는데, 본 프로젝트에서는 간단히 두 가지 방식을 사용한다. Path 어노테이션은 URL에 매개변수를 직접 삽입하는 방식으로 사용되고, Query 어노테이션은 정해진 URL로 모든 데이터를 전달하고 받을 수 있다.
###### Activity package
- BoardDetailActivity
알림장의 내용을 확인할 수 있는 액티비티다. 인텐트를 통해 터치된 포스트의 번호를 받아 데이터베이스에서 해당 포스트의 id 값을 조회한다. postName과 postBody를 각각 해당하는 위치의 TextView에 setText 메서드를 삽입하여 설정하여 사용자에게 보여준다.
- BoardListActivity
알림장의 목록을 볼 수 있는 액티비티다. ListView를 커스텀 어댑터와 연결하여 목록을 띄우게 되는데, RecyclerView를 사용하지 않은 이유는 포스트 제목을 클릭하면 해당하는 포스트로 넘어가는 형태로 구현하기 위해서이다. 그러면 아이템마다 onClick 메소드를 사용해야 하는데 RecyclerView는 onClick 메소드를 구현하기가 까다로웠다. 따라서 onClick 메소드를 구현하기 쉬운 ListView를 사용하였다. 먼저 빈 ArrayList를 어댑터에 넣는 이유는 Skipping Layout 에러를 방지하기 위해서이다. 미리 빈 ArrayList를 어댑터에 전달하지 않으면 아이템이 null 상태가 되어 에러가 발생한다. Retrofit 인터페이스의 getClassroomList를 호출하여 목록을 ArrayList에 받아온 뒤 이를 어댑터에 삽입하고 어댑터를 끼워 사용자에게 보이도록 한다.
- BoardRegisterActivity
알림장을 등록할 수 있는 액티비티다. 알림장의 제목과 내용을 EditText에 입력 받을 수 있고 버튼을 클릭하면 입력된 내용이 String 타입 변수에 저장된다. Retrofit 인터페이스의 putBoard 메소드를 호출하여 저장된 String을 데이터베이스로 전달한다.
- TeacherClassManagement & TeacherStudentManagement
두 액티비티는 비슷한 레이아웃으로 구성되어있다. 크게 세 가지 기능으로 나눠지는데, 첫째로 추가 기능을 보자면 추가 버튼을 누르면 AlertDialog가 띄워진다. AlertDialog에는 사용자의 입력을 받을 수 있는 EditText 위젯들이 있고, Submit 버튼을 누르게 되면 Retrofit의 PUT 메소드를 호출하여 데이터를 전달한다. 데이터 추가가 끝나면 인텐트를 종료하고 다시 실행하여 업데이트된 리스트를 조회할 수 있도록 하였다. 둘째로 삭제 기능 또한 AlertDialog를 띄우고 사용자에게 입력 받은 데이터를 Retrofit의 DELETE 메소드를 호출하여 데이터베이스에 삭제를 요청한다. 이 또한 요청이 종료되면 인텐트를 종료하고 새로 실행하여 업데이트된 목록을 조회할 수 있다. 마지막으로 조회 기능은 액티비티에 입장하자마자 커스텀 어댑터에 연결한 RecyclerView를 이용하여 사용자가 볼 수 있도록 하였다. 데이터베이스에서 조회한 객체의 리스트를 만들어 어댑터에 보내고, 이를 뷰에 끼우는 방식으로 구현하였다.
- MealActivity
내부에 OpenAPI 클래스가 AsyncTask를 상속받아서 구현되어 있다. 나이스 api를 통해서 해당 학교의 급식 정보를 입력받은 후 String trin=[<br/>*];로 쓸데없는 데이터 값을 제거하여 결과적으로 급식 메뉴명과 알레르기 정보의 값만 parsing해왔다. parsing해온 데이터는 어제, 오늘, 내일로 나누어 각각 표시되도록 layout에 띄웠다.
- CallActivity
이 액티비티의 경우 학부모나 교사가 전화번호를 입력한후 전화걸기를 누르면 전화로 이동하는 액티비티이다. editText를 이용하여 번호를 입력받은 후 편진된 텍스트를 기반으로 하여 전화를 걸 수 있도록 구성디어 있다.
- MainActivity&ParentsHomeActivity
교사 홈과 학부모 홈으로 두 액티비니는 유사한 레이아웃을 구성하고 있다. 각 레이아웃에는 채팅, 급식, 시간표가 공통적으로 들어가 있고 교사 홈의 경우에는 원생 추가 및 삭제, 반 추가 및 삭제의 기능이 함께 있다. 학부모 홈에는 원생의 사진과 이름 반에 대해서 나타나고 있고 출석여부에 대해서도 보여주고 있다. 각 기능에 대해서 자세한 레이아웃으로 이동을 원하는 경우에는 button을 통해서 다른 레이아웃으로 이동할 수 있도록 하였다.
- RegisterActivity
사용자가 회원가입을 하는 액티비티이다. 사용자는 아이디를 입력하고 아이디 확인 버튼을 눌러서 중복 여부를 확인한다. 그리고 EditText에 비밀번호와 비밀번호 확인을 입력하여 비밀번호를 제대로 입력하였는지 확인한다. 마지막에 학부모인지 선생님인지를 Radiobutton으로 입력받고 위 데이터들이 SQlite 데이터베이스로 등록이 된다.
- LoginrActivity
사용자가 로그인을 하는 액티비티이다. ID와 Password를 입력하여 로그인을 하면 데이터베이스에 등록된 학부모인지 선생님인지 여부에 따라 ParentsHomeActivity 혹은 TeacherHomeActivity로 이동한다. 
- EditTimeTableMain
시간표를 확인 및 수정할 수 있다. 저장/불러오기/추가/지우기 버튼이 있는데 추가 버튼을 눌러서 시간표를 추가할 수 있고 저장을 누르면 Database에 저장이 된다. 불러오기를 누르면 저장되어 있던 시간표가 로드되고 학부모는 이 화면을 볼 수 있다.

##### 결론 및 토의
###### 결론
이로써 유치원 통합 관리 어플리케이션 KinderBook이 완성이 되었다. 팀원들이 모두 자신이 맡은 기능들을 잘 수행해 주었고 오류 없이 잘 수행이 된다. 어플을 실행시키면 로그인 화면이 뜨고 학부모로 회원가입한 ID와 Password를 입력하면 학부모 홈화면으로 로그인된다. 반대로 선생님으로 회원가입한 ID와 Password로 로그인하면 선생님 홈화면이 나온다. 선생님 홈 화면에선 반 추가 및 삭제, 학생 추가 및 삭제, 시간표 등록 및 삭제, 알림장 등록 및 삭제 등 학부모가 볼 수 있는 여러 항목들을 수정할 수도 있고 Database를 다룰 수도 있다. 학부모 홈화면에서는 학부모가 입력해두었던 학생의 시간표, 알림장, 식단 등을 확인할 수 있다.
###### 장점
KinderBook의 장점은 누구나 쉽게 이용할 수 있다는 점이다. 앱이 복잡하지 않고 핵심 기능들만 구현되어 있어서 처음 앱을 접하는 선생님도 쉽게 반관리를 수행할 수 있고 데이터를 입력할 수 있다. 학부모 측은 로그인만 하면 사전에 입력된 데이터를 바로 접할 수 있다. 그 다음으로는 동시성이 강하다. 선생님이 Data만 입력해두면 학부모 측은 로그인만 하면 바로 본인의 아이들과 소속 반의 정보들을 얻을 수 있다. 서버가 잘 구현되어 있어서 입력한 데이터가 즉시 데이터베이스에 저장되고 다른 사용자들도 동시에 같은 정보를 얻을 수 있다. 
###### 단점
UI/UX 디자인을 배워서 이를 담당하고 책임지는 역할이 없이 처음 앱을 만들어본 프로젝트여서 디자인이 매끄럽지 못하다. 시간이 많았으면 핵심 기능을 완수한 후에 앱의 완성도를 올리기 위해 디자인에 공을 들였을 텐데 그러지 못하여 아쉬운 점이 있다. 또한 처음 기획했던 것과는 다르게 채팅 기능 구현이 빠져서 더 유용한 기능을 제공하지 못하였다. 
##### 프로젝트 후 소회
다수의 인원으로 힘을 합쳐 직접 앱을 만들어보는 프로젝트를 경험하고 여러 깨달음을 얻었다. 여러 기능을 수행하기 위해 수업 내용과 강의 자료를 몇번씩 찾아보고 구글링도 해보고 하나의 오류를 고치기 위해 몇시간을 소비하면서 힘들었던 경험은 모두 유익한 경험이 되었다. 실제 실무에서 많이 쓰이는 깃헙으로 협업을 하며 깃헙의 활용 능력도 생겼으며 Server와 Database도 직접 다룰 수 있는 계기가 되었다. 한편, 비단 프로그래밍 실력 뿐만 아니라 협업에 있어서 필요한 자세와 함께 문제를 해결하는 능력 등이 향상된 것 같다. 비록 플레이스토어에 바로 출시할 수준의 앱은 아니지만 프로젝트를 하면서 느꼈던 깨달음은 그 이상의 가치가 있었다.
